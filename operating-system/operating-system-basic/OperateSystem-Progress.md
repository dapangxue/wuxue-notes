# 操作系统

## 一、进程线程

## 进程

进程是系统资源分配的最小单位，区分进程就是通过进程控制块（PCB）来区分。

进程控制块（PCB）主要包括

+ 进程描述符
+ 当前进程的状态
+ CPU现场信息
+ 程序计数器，接着要运行的指令地址
+ 输入输出状态
+ 代码块和数据块

进程的状态主要有：新建状态、就绪状态（ready）、执行状态(running)、阻塞状态(waiting)、死亡状态。

除了新建状态和死亡状态，其他的状态属于进程执行过程中的状态。就绪状态和执行状态可以相互转换，其他的装换属于单向转换，比如从就绪状态转换到阻塞状态，再从阻塞状态转换到就绪状态。

## 线程

线程属于CPU调度的基本单位，同一个进程中线程的切换不会引起进程的切换，不同的进程中线程的切换会引起进程的切换。

线程属于轻量级进程，同样也有新建状态、就绪状态、阻塞状态、执行状态和死亡状态。在Java的HotSpot VM 虚拟机中，每创建一个线程，通过操作系统内核会对应创建一个线程，属于内核级线程。

## 二、进程间通信

### Semaphore

信号量属于整型变量，定义初始值后，对应的有两个原子操作up和down。

+ down操作，信号量减一，如果当前信号量为0，在执行down操作后，会有一个进程阻塞在当前信号量。
+ up操作，信号量加一，在执行up操作后，会唤醒一个阻塞在当前信号量的进程。

#### 信号量的作用

信号量可以用来实现01信号灯，即信号量的值只能是0或者1。也就是说同时只能有一个进程进入临界区。

